---
title: "[자바의 정석] 14장 람다와 스트림(Lambda & Stream)"

date: 2023-12-09 03:27:30 +/09:00
categories: [Java, Java]
tags: [java]     # TAG names should always be lowercase
pin: false

---
## Java의 정석 - 14장 람다와 스트림
새로운것을 막 공부하는 것보다 기초부터 튼튼하게 하는것이 중요하다는 것을 뼈아프게 느낀 나...  
1년전에 돌렸던 자바의 정석을 다시 호로록 돌리기로 결심하다..!
### 람다식(Lambda Expression)

`람다식(Lambda Expression)` : 람다식은 간단하게 말해서 `메서드를 하나의 '식'으로 표현한 것이다.` 람다식은 함수를 간략하면서도 명확하게 표현할 수 있게 해준다.  
메서드를 람다식으로 표현하면 `메서드의 이름과 반환값이 없어지므로` 람다식을 `익명함수` 라고도 한다.

```java
int[] arr = new int[5];
Arrays.setAll(arr, (i)->(int)(Math.random()*5)+1);
```
#### 람다식의 장점 
* 람다식을 사용하면 간결하고 이해하기 쉽다.
* 모든 메서드는 클래스에 포함되어야 하므로 클래스도 새로 만들어야 하고, 객체도 새로 만들어야 하지만, 람다식을 사용할 경우 이 과정을 생략할 수 있다. ( 람다식 자체만으로 이 메서드의 역할을 대신할 수 있다. )
* 메서드를 변수처럼 다루는 것이 가능하다. ( 동작 파라미터화 )

### 람다식 작성하기

메서드를 람다식으로 만드는 방법을 알아보자.  
메서드를 람다식으로 만드는 것은 간단하다. 메서드에서 이름이랑 반환타입을 제거하고, 매개변수 선언부와 함수 바디 사이에 '->'를 추가하기만 하면 된다.

```java
int max(int a, int b){
    return a>b?a:b;
}
```
람다식으로 표현하면 다음과 같다.
```java
(int a, int b) -> {
    return a>b?a:b;
}
```
반환값이 있는 메서드의 경우, return문 대신 식(expression)으로 대신할 수 있다. 식의 연산결과가 자동적으로 반환값이 된다. 이때는 문장(statement)이 아닌 식이므로 끝에 ';'를 불이지 않는다. 그리고 괄호{}, () 안에 문장이 한문장이거나, 매개변수가 하나만 존재하는 경우 괄호를 생략할 수 있다. 그러나 return이나 , 매개변수 타입이 있다면 괄호를 생략할 수 없다.
```java
(int a , int b) -> a>b?a:b
```
```java
a->a*a
```
그리고 람다식에 선언된 매개변수 타입은 대부분 추론이 가능하기 때문에 생략이 가능하다. 반환타입이 없는 이유도 항상 추론이 가능하기 때문이다.
```java
(a,b) -> a>b?a:b
```

### 람다식의 예
다음은 메서드와 메서드를 람다식으로 변환한 예제들이다.
  
예제1.  

```java
// 메서드
int printVar(String name, int i){
    System.out.println(name+"i ");
}
// 람다식
// 방법 1.
(String name, int i)->{
    System.out.println(name+"i ");
}
// 방법 2.
(name, i) -> {
    System.out.println(name+"i ");
}
// 방법 3.
(name, i) -> System.out.println(name+"i ")
```
예제2.  
```java
//메서드
int square(int x){
    return x*x;
}
//람다식
// 방법 1.
(int x)->x*x
// 방법 2.
(x) ->x*x
// 방법 3.
x->x*x
```

예제3.  
```java
//메서드
int sumArr(int[] arr){
    int sum =0;
    for(int i: arr){
        sum+=i;
    }
    return sum
}
//람다식
(int[] arr)-> {
    int sum =0;
    for(int i: arr){
        sum+=i;
    }
    returm sum;
}
```

### 함수형 인터페이스
람다식은 어떤 클래스에 포함되는 것일까? 람다식은 익명 클래스의 객체와 동일하다.
원래 같은 경우에는 참조변수가 있어야 객체의 메서드를 호출할 수 있었다. 그렇다면 익명 객체의 주소응 어떤 타입의 참조변수로 지정해야 할까? 참조형이기 때문에 클래스나 인터페이스가 가능하다. 그리고 람다식과 동등한 메서드가 정의되어 있는 것이여야 한다. 그래야만 참조변수로 익명 객체(람다식)의 메서드를 호출할 수 있기 때문이다.

다음 예제를 통해 함수형 인터페이스(Functional Interface)에 대해 알아보자
```java
interface MyFunction{
    public abstract int mac(int a, int b)
}
```
이 인터페이스를 구현한 익명 클래스의 객체는 다음과 같이 생성할 수 있다.
```java
MyFunction f = new MyFunction(){
    public int max(int a, int b){
        return a>b?a:b;
    }
};
int big = f.max(5,3);
```
그리고 익명객체를 다음과 같이 람다식으로 대체할 수 있다.
```java
MyFunction f = (int a, int b)-> a>b?a:b
int big = f.max(5,3);
```
인터페이스를 구현한 익명 객체를 람다식으로 대체가 가능한 이유는, 람다식도 실제로 익명 객체이고, MyFunction 인터페이스를 구현한 익명 객체의 메서드 max()와 람다식의 매개변수 타입과 개수 그리고 반환값이 일치하기 때문이다. 따라서 인터페이스를 람다식으로 다루기로 결정하였으며, `람다식을 다루기 위한 인터페이스를 "함수형 인터페이스(Functional Interface)"`라고 한다.

```java
@FunctionalInterface
interface MyFunction{
    public abstract int max(int a, int b);
}
```
단, 함수형 인터페이스에는 오직 하나의 추상 메서드만 정의되어 있어야 한다는 제약이 있다. 그래야 람다식과 인터페이스가 1:1로 연결될 수 있기 때문이다.
### 함수형 인터페이스 타입의 매개변수, 반환 타입

### java.util.function 패키지

### Predicate의 결합

### 컬렉션 프레임웤과 함수형 인터페이스

### 메서드 참조

